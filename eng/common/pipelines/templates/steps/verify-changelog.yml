parameters:
- name: PackageName
  type: string
  default: 'not-specified'
- name: ServiceName
  type: string
  default: 'not-specified'

steps:
  - template: /eng/common/pipelines/templates/steps/run-specific-variables.yml
  - task: Powershell@2
    inputs:
      filePath: $(Build.SourcesDirectory)/eng/common/scripts/Verify-ChangeLog.ps1
      arguments: >
        -PackageName ${{ parameters.PackageName }}
        -ServiceName ${{ parameters.ServiceName }}
        -RepoRoot $(Build.SourcesDirectory)
        -Language $(Language)
        -ForRelease $$IsReleaseRun
      pwsh: true
      workingDirectory: $(Pipeline.Workspace)
    displayName: Verify ChangeLogEntry for ${{ parameters.PackageName }}
    continueOnError: false